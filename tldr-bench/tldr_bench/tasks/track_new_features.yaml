# Benchmark tasks for token efficiency features
#
# ACTIVE FEATURES (measure actual token savings):
#   - symbolkite: Signature-based context extraction
#   - edit_locality: Edit-optimized context with boundaries & invariants
#
# DISABLED FEATURES (require different benchmark types):
#   - attention_pruning: Needs multi-session learning benchmark
#   - context_delegation: Needs agent execution benchmark
#   - coherence_verify: Needs error detection rate benchmark
#
# See disabled_variants/ for implementations pending proper benchmarks.

# =============================================================================
# COMPRESSION BENCHMARKS - Measure actual token savings
# =============================================================================

- id: nf-edit-001
  title: "Edit-locality: Single function refactor"
  repo: "tldr-swinton"
  entry: "src/tldr_swinton/modules/core/daemon.py:TLDRDaemon._handle_notify"
  expected_files: ["src/tldr_swinton/modules/core/daemon.py"]
  expected_lines: [718]
  type: "compression"
  notes: |
    Measures edit-locality context vs full file and symbolkite.
    Edit-locality should be smaller than full file but larger than
    pure symbolkite (it includes function body + boundaries).
  variants: ["baselines", "symbolkite", "edit_locality"]

- id: nf-edit-002
  title: "Edit-locality: Class method with invariants"
  repo: "tldr-swinton"
  entry: "src/tldr_swinton/modules/semantic/index.py:SemanticIndex.search"
  expected_files: ["src/tldr_swinton/modules/semantic/index.py"]
  expected_lines: [150]
  type: "compression"
  notes: |
    Function with type hints and assertions - edit_locality
    should extract these as invariants.
  variants: ["baselines", "symbolkite", "edit_locality"]

- id: nf-edit-003
  title: "Edit-locality: Simple utility function"
  repo: "tldr-swinton"
  entry: "src/tldr_swinton/modules/core/output_formats.py:format_context_pack"
  expected_files: ["src/tldr_swinton/modules/core/output_formats.py"]
  expected_lines: [50]
  type: "compression"
  notes: |
    Small function with clear boundaries - should show edit_locality
    is close to symbolkite for simple functions.
  variants: ["baselines", "symbolkite", "edit_locality"]

- id: nf-edit-004
  title: "Edit-locality: Deep symbol in large file"
  repo: "tldr-swinton"
  entry: "src/tldr_swinton/modules/core/engines/symbolkite.py:get_relevant_context"
  expected_files: ["src/tldr_swinton/modules/core/engines/symbolkite.py"]
  expected_lines: [520]
  type: "compression"
  notes: |
    Large file with deep call graph - tests edit_locality's
    ability to extract focused context.
  variants: ["baselines", "symbolkite", "edit_locality"]

- id: nf-edit-005
  title: "Edit-locality: CLI entry point"
  repo: "tldr-swinton"
  entry: "src/tldr_swinton/cli.py:main"
  expected_files: ["src/tldr_swinton/cli.py"]
  type: "compression"
  notes: |
    Entry point with many dependencies - tests edit_locality
    boundary detection on wide dependency set.
  variants: ["baselines", "symbolkite", "edit_locality"]
